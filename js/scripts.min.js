/*!
    Title: Dev Portfolio Template
    Version: 1.1.3
    Last Change: 03/25/17
    Author: Ryan Fitzgerald
    Repo: https://github.com/RyanFitzgerald/devportfolio-template
    Issues: https://github.com/RyanFitzgerald/devportfolio-template/issues

    Description: This file contains all the scripts associated with the single-page
    portfolio website.
*/
! function(e) {
	e("html").removeClass("no-js"), e("header a").click(function(i) {
		if (!e(this).hasClass("no-scroll")) {
			i.preventDefault();
			var t = e(this).attr("href"),
				n = e(t).offset().top;
			e("html, body").animate({
				scrollTop: n + "px"
			}, Math.abs(window.pageYOffset - e(t).offset().top) / 1), e("header").hasClass("active") && e("header, body").removeClass("active")
		}
	}), e("#to-top").click(function() {
		e("html, body").animate({
			scrollTop: 0
		}, 500)
	}), e("#lead-down span").click(function() {
		var i = e("#lead").next().offset().top;
		e("html, body").animate({
			scrollTop: i + "px"
		}, 500)
	}), e("#experience-timeline").each(function() {
		$this = e(this), $userContent = $this.children("div"), $userContent.each(function() {
			e(this).addClass("vtimeline-content").wrap('<div class="vtimeline-point"><div class="vtimeline-block"></div></div>')
		}), $this.find(".vtimeline-point").each(function() {
			e(this).prepend('<div class="vtimeline-icon"><i class="fa fa-map-marker"></i></div>')
		}), $this.find(".vtimeline-content").each(function() {
			var i = e(this).data("date");
			i && e(this).parent().prepend('<span class="vtimeline-date">' + i + "</span>")
		})
	}), e("#mobile-menu-open").click(function() {
		e("header, body").addClass("active")
	}), e("#mobile-menu-close").click(function() {
		e("header, body").removeClass("active")
	})
}(jQuery);

//jQuery is required to run this code
/** Document Ready Functions **/
/********************************************************************/

$( document ).ready(function() {

    // Resive video
    scaleVideoContainer();

    initBannerVideoSize('.video-container .poster img');
    initBannerVideoSize('.video-container .filter');
    initBannerVideoSize('.video-container video');
        
    $(window).on('resize', function() {
        scaleVideoContainer();
        scaleBannerVideoSize('.video-container .poster img');
        scaleBannerVideoSize('.video-container .filter');
        scaleBannerVideoSize('.video-container video');
    });

});

/** Reusable Functions **/
/********************************************************************/

function scaleVideoContainer() {

    var height = $(window).height();
    var unitHeight = parseInt(height) + 'px';
    $('.homepage-hero-module').css('height',unitHeight);

}

function initBannerVideoSize(element){
    
    $(element).each(function(){
        $(this).data('height', $(this).height());
        $(this).data('width', $(this).width());
    });

    scaleBannerVideoSize(element);

}

function scaleBannerVideoSize(element){

    var windowWidth = $(window).width(),
        windowHeight = $(window).height(),
        videoWidth,
        videoHeight;
    
    console.log(windowHeight);

    $(element).each(function(){
        var videoAspectRatio = $(this).data('height')/$(this).data('width'),
            windowAspectRatio = windowHeight/windowWidth;

        if (videoAspectRatio > windowAspectRatio) {
            videoWidth = windowWidth;
            videoHeight = videoWidth * videoAspectRatio;
            $(this).css({'top' : -(videoHeight - windowHeight) / 2 + 'px', 'margin-left' : 0});
        } else {
            videoHeight = windowHeight;
            videoWidth = videoHeight / videoAspectRatio;
            $(this).css({'margin-top' : 0, 'margin-left' : -(videoWidth - windowWidth) / 2 + 'px'});
        }

        $(this).width(videoWidth).height(videoHeight);

        $('.video-container video').addClass('fadeIn animated');
        

    });
}